# ==========================================
# Bio-SFINet (Spatial-Frequency Network) 配置
# 适用数据: Mouse (P22)
# ==========================================

project:
  name: "SF_Mouse_Analysis"
  version: "1.0.0"
  seed: 42
  save_dir: "./results/mouse/checkpoints/"
  eval_dir: "./results/mouse/predictions/"

eval:
  checkpoint: "best"
  checkpoints:
    best: "ckpt_best.pth"
    final: "ckpt_200.pth"

# ------------------------------------------
# 1. 数据路径与预处理参数（超参与 human 对齐）
# ------------------------------------------
data:
  raw_path: "data/raw/mouse"
  processed_path: "data/processed/mouse"

  files:
    rna_mtx: "P22.mtx"
    rna_genes: "genes.tsv"
    rna_barcodes: "gene_barcodes.tsv"

    atac_mtx: "P22_atac.mtx"
    atac_peaks: "peaks.tsv"
    atac_barcodes: "atac_barcodes.tsv"

    spatial: "position.tsv"
    gtf: "gencode.vM25.annotation.gtf.gz"

  parameters:
    n_top_genes: 3000
    rna_min_cells: 3
    rna_target_sum: 1e4
    n_global_peaks: 50000
    n_final_peaks: 30000
    atac_min_cells: 50
    atac_target_sum: 1e4
    tfidf_eps: 1e-6
    tss_window: 150000
    knn_k: 10

# ------------------------------------------
# 2. 模型架构参数
# ------------------------------------------
model:
  name: "SFNet"
  rna_in_dim: 3000
  hidden_dim: 512
  rna_n_heads: 4
  rna_dropout: 0.1
  atac_dropout: 0.1
  n_heads: 4
  dropout: 0.1
  grid_size: 128
  latent_dim: 50
  sfib_dim: 128
  proj_hidden_dim: 64
  proj_output_dim: 64

# ------------------------------------------
# 3. 训练策略参数（与 human 对齐）
# ------------------------------------------
train:
  epochs: 300
  batch_size: 1
  learning_rate: 1e-3
  weight_decay: 1e-4
  lambda_rna: 1.0
  lambda_atac: 1.0
  lambda_clip: 0.1
  clip_temperature: 0.1
  save_every: 50
  device: "cuda"
  log_interval: 10
  best_name: "ckpt_best.pth"
